name: Build
description: Build
inputs:
  rosdistro:
    description: rosdistro
    required: true
  branch:
    description: branch to chechout
    required: true
runs:
  using: composite
  steps:
    - name: System update
      run: |
        sudo apt update
        sudo apt --yes upgrade
      shell: bash
    - name: Checkout
      run: |
        sudo apt update
        sudo apt --yes install git
        git clone --branch ${{ inputs.branch }} \
          https://github.com/yoshito-n-students/usb_cam_hardware.git \
          src/usb_cam_hardware
      shell: bash
    - name: Install dependencies
      run: |
        source /opt/ros/${{ inputs.rosdistro }}/setup.bash
        sudo apt update
        rosdep update --rosdistro ${{ inputs.rosdistro }}
        sudo rosdep install --default-yes -r --ignore-src --from-paths src --rosdistro ${{ inputs.rosdistro }}
      shell: bash
    - name: Build
      run: |
        source /opt/ros/${{ inputs.rosdistro }}/setup.bash
        catkin_make
      shell: bash